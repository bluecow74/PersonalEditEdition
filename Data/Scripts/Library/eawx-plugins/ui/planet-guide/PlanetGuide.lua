require("deepcore/std/class")
require("eawx-util/StoryUtil")
require("eawx-plugins/ui/planet-guide/GuideFunctions")
CONSTANTS = ModContentLoader.get("GameConstants")

---@class PlanetGuide
PlanetGuide = class()

---@param galactic_conquest GalacticConquest
function PlanetGuide:new(galactic_conquest)
	self.galactic_conquest = galactic_conquest
    self.id = string.lower(GlobalValue.Get("MOD_ID"))

    local plot = Get_Story_Plot("Conquests\\Documentation.xml")
    DebugMessage("PlanetGuide::new -- story plot is %s", tostring(plot))

    local stat_display_click_event = plot.Get_Event("Influence_Doc_Trigger")
    stat_display_click_event.Set_Reward_Parameter(1, self.galactic_conquest.HumanPlayer.Get_Faction_Name())

    ---@private
	self.stat_display_event = plot.Get_Event("Influence_Doc")
    DebugMessage("PlanetGuide::new -- planet guide event is %s", tostring(self.stat_display_event))
end

function PlanetGuide:update()
    DebugMessage("PlanetGuide::update -- update started")
    self.stat_display_event.Clear_Dialog_Text()

    self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_HEADER_INFLUENCE_EFFECTS")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_SEPARATOR")
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("AILON",{"Ailon Nova Guards"},{"7+"}))
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("ALARIS",{"Raddaugh Gnasp Fluttercrafts"},{"7+"}))
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("BESPIN",{"Storm Cloud Cars"},{"7+"}))
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("CORELLIA",{"CorSec Troopers"},{"7+"}))
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("CHRISTOPHSIS",{"LR-57 Combat Droids"},{"7+"}))
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("GEONOSIS",{"Kolivex Cruisers"},{"7+"}))
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("CHARROS",{"Riot Hailfires Droids"},{"7+"}))
	self.stat_display_event.Add_Dialog_Text(Create_Planet_List({"KAMINO"}) .. ": Can gain Clone Commander minor heroes (ground) from Academy at 4 influence and higher (GAR)")
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("KASHYYYK",{"Raddaugh Gnasp Fluttercraft"},{"7+"}))
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_INFLUENCE_PLANET_TD_FACTORY")
	self.stat_display_event.Add_Dialog_Text("CIS Factory Worlds: " .. Create_Planet_List({"BALMORRA", "CATO_NEIMOIDIA", "DEKO_NEIMOIDIA", "FOEROST", "FONDOR", "GEONOSIS", "HYPORI", "ORD_CESTUS", "RAXUS", "SKAKO", "TELTI"}))
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_INFLUENCE_PLANET_ACADEMY")
	self.stat_display_event.Add_Dialog_Text("Republic Academy Worlds: " .. Create_Planet_List({"ANAXES", "CARIDA", "CORELLIA", "CORUSCANT", "CORULAG", "KAMINO", "LIANNA", "MANDA", "OSLUMPEX", "PESFAVRI", "PREFSBELT"}))
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("MANDALORE",{"Mandalorian Soldiers and Kom'rk Fighters","Mandalorian Commandos"},{"7+","8+"}))
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("THYRSUS",{"Sun Guards"},{"7+"}))
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("MON_CALAMARI",{"Princess Transport Cruiser","Liberty Transport Cruiser","Home One Exploration Cruiser"},{"7+","8+","10"}))
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("KESSEL",{"Treaded Neutron Torches"},{"6+"}))
	
	self.stat_display_event.Add_Dialog_Text("TEXT_NONE")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_HEADER_INFLUENCE_FIGHTERS")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_SEPARATOR")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_INFLUENCE_FIGHTERS_GEONOSIS")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_INFLUENCE_FIGHTERS_NABOO")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_INFLUENCE_FIGHTERS_MANDALORIAN")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_INFLUENCE_FIGHTERS_MANDALORIAN_WORLDS")
	self.stat_display_event.Add_Dialog_Text("TEXT_NONE")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_HEADER_INFLUENCE_LOYALTY")
    self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_SEPARATOR")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_INFLUENCE_LOYALTY_PLANET_GEONOSIS")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_INFLUENCE_LOYALTY_PLANET_KASHYYYK")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_INFLUENCE_LOYALTY_PLANET_NAL_HUTTA")
	
	self.stat_display_event.Add_Dialog_Text("TEXT_NONE")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_HEADER_COMPANIES")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_SEPARATOR")
	Create_Corp_Entry(self.stat_display_event,"Aratech Repulsor Company","Aratech_HQ",{"CARIDA"})
	Create_Corp_Entry(self.stat_display_event,"Baktoid Industries","Baktoid_HQ",{"BALMORRA", "CATO_NEIMOIDIA", "DEKO_NEIMOIDIA", "GEONOSIS", "HYPORI", "MECHIS", "METALORN", "ORD_CESTUS", "SKAKO", "TELTI",})
	Create_Corp_Entry(self.stat_display_event,"Balmorran Arms","Balmorran_Arms_HQ",{"BALMORRA"})
	Create_Corp_Entry(self.stat_display_event,"Bespin Motors","Bespin_Motors_HQ",{"BESPIN"})
	Create_Corp_Entry(self.stat_display_event,"Colicoid Creation Nest","Colicoid_HQ",{"COLLA"})
	Create_Corp_Entry(self.stat_display_event,"Commerce Guild","Commerce_Guild_HQ",{"RAXUS", "MINNTOOINE", "SULLUST", "FELUCIA", "SALEUCAMI", "CASTELL", "KORRIBAN"})
	Create_Corp_Entry(self.stat_display_event,"Corellian Engineering Corporation","CEC_HQ",{"CORELLIA", "DENON", "DURO", "RODIA", "TYNNA",})
	Create_Corp_Entry(self.stat_display_event,"Cloning Facility","Cloning_HQ",{"ARKANIA", "BYSS", "COLUMUS", "KAMINO", "KHOMM", "WAYLAND", "XUAQUARRES"})
	Create_Corp_Entry(self.stat_display_event,"Damorian Manufacturing Corporation","Damorian_HQ",{"BRENTAAL"})
	Create_Corp_Entry(self.stat_display_event,"Free Dac Engineers","Free_Dac_HQ",{"MINNTOOINE","MON_CALAMARI","PAMMANT"})
	Create_Corp_Entry(self.stat_display_event,"Geonosian Engineers","Geonosian_HQ",{"GEONOSIS"})
	Create_Corp_Entry(self.stat_display_event,"Guarja Shipyards","Guarja_HQ",{"NAL_HUTTA"})
	Create_Corp_Entry(self.stat_display_event,"Haor Chall Engineering","Haor_Chall_HQ",{"CHARROS"})
	Create_Corp_Entry(self.stat_display_event,"Hoersch-Kessel Drive, Inc","Hoersch_Kessel_HQ",{"NIMBAN", "BALMORRA", "DEKO_NEIMOIDIA", "DRUCKENWELL", "GEONOSIS", "HYPORI", "KORU_NEIMOIDIA", "MINNTOOINE", "ORD_TRASI"})
	Create_Corp_Entry(self.stat_display_event,"Ikas-Adno","Ikas_Adno_HQ",{"MULATAN"})
	--Create_Corp_Entry(self.stat_display_event,"Incom Corporation","Incom_HQ",{"FRESIA","CAL_SETI"})
	Create_Corp_Entry(self.stat_display_event,"Jedi Temple","Jedi_Temple",{"CORUSCANT"})
	Create_Corp_Entry(self.stat_display_event,"Jedi Enclave","Jedi_Enclave",{"ANTAR", "ARKANIA", "BESPIN", "BOGDEN", "CORELLIA", "CULARIN", "DANTOOINE", "DEVARON", "ILUM", "KASHYYYK", "OBROA_SKAI", "OSSUS", "TYTHON", "YAVIN"})
	Create_Corp_Entry(self.stat_display_event,"Kuat Drive Yards","KDY_HQ",{"KUAT", "ANAXES", "BALMORRA", "FONDOR", "GYNDINE", "HUMBARINE", "JAEMUS", "UBRIKKIA", "XA_FEL", "YAGA_MINOR",})
	Create_Corp_Entry(self.stat_display_event,"MandalMotors","Mandal_Motors_HQ",{"MANDALORE"})
	Create_Corp_Entry(self.stat_display_event,"Mekuun Corporation","Mekuun_HQ",{"BELSAVIS","TALHOVI"})
	Create_Corp_Entry(self.stat_display_event,"Mon Calamari Shipyards","MCS_HQ",{"MON_CALAMARI"})
	Create_Corp_Entry(self.stat_display_event,"Anaxes War College","Anaxes_War_College",{"ANAXES"})
	Create_Corp_Entry(self.stat_display_event,"Officer Academy","Carida_Academy",{"CARIDA", "CORELLIA", "CORUSCANT", "CORULAG", "KAMINO", "LIANNA", "MANDA", "OSLUMPEX", "PESFAVRI", "PREFSBELT"})
	Create_Corp_Entry(self.stat_display_event,"Outland Regions Security Force HQ","ORSF_HQ",{"ERIADU"})
	Create_Corp_Entry(self.stat_display_event,"Rendili StarDrive","Rendili_HQ",{"RENDILI", "BRENTAAL", "DRUCKENWELL", "MON_CALAMARI", "ROTHANA", "SLUIS_VAN", "TARIS",})
	Create_Corp_Entry(self.stat_display_event,"Retail Caucus","Retail_Caucus_HQ",{"CHRISTOPHSIS"})
	Create_Corp_Entry(self.stat_display_event,"Rothana Heavy Engineering","Rothana_HQ",{"ROTHANA"})
	Create_Corp_Entry(self.stat_display_event,"SoroSuub","SoroSuub_HQ",{"SULLUST", "BYBLOS", "MECHIS"})
	Create_Corp_Entry(self.stat_display_event,"Sith Academy","Sith_Academy",{"ARKANIA","BPFASSH", "DATHOMIR", "DROMUND", "DXUN", "GAMORR", "GIJU", "KORRIBAN", "KRANT", "THULE", "TYTHON", "VJUN", "YAVIN", "ZIOST"})
	Create_Corp_Entry(self.stat_display_event,"Tactical Droid Factory","Tactical_Droid_Factory",{"BALMORRA", "CATO_NEIMOIDIA", "DEKO_NEIMOIDIA", "FOEROST", "FONDOR", "GEONOSIS", "HYPORI", "ORD_CESTUS", "RAXUS", "SKAKO", "TELTI"})
	Create_Corp_Entry(self.stat_display_event,"TaggeCo.","TaggeCo_HQ",{"BONADAN", "BRENTAAL", "DRUCKENWELL", "LANTILLIES", "SLUIS_VAN", "SULLUST", "TEPASI",})
	Create_Corp_Entry(self.stat_display_event,"Taim & Bak","Taim_Bak_HQ",{"RENDILI", "CHARDAAN"})
	Create_Corp_Entry(self.stat_display_event,"Techno Union","Techno_Union_HQ",{"SKAKO", "GEONOSIS", "BALMORRA", "ORD_CESTUS", "TELTI", "FOEROST", "KUAT", "FONDOR", "HYPORI", "METALORN", "MUSTAFAR", "NELVAAN", "SALEUCAMI", "UTAPAU", "VULPTER", "TAR_MORDEN"})
	Create_Corp_Entry(self.stat_display_event,"Trade Federation","Trade_Federation_HQ",{"CATO_NEIMOIDIA", "CULARIN", "DEKO_NEIMOIDIA", "DRUCKENWELL", "ENARC", "KORU_NEIMOIDIA", "LOK", "VULPTER"})
	Create_Corp_Entry(self.stat_display_event,"TransGalMeg","TransGalMeg_HQ",{"FOEROST", "VULPTER", "PAKO_RAMOON"})
	Create_Corp_Entry(self.stat_display_event,"Ubrikkian Industries","Ubrikkian_HQ",{"KUAT", "CHARROS", "KWENN", "UBRIKKIA"})
	Create_Corp_Entry(self.stat_display_event,"Uulshos Manufacturing","Uulshos_HQ",{"ETTI", "ESSION"})

    Story_Event("SHOW_INFLUENCE_DOC")
end